<!-- 
  WEB322 Assignment 2
  Name: Omar Khan
  Student Number: 132197203
  Email: okhan27@myseneca.ca
  Section NCC
  Date: 29/6/2021
  Live demo: https://web322-a2-omar-khan.herokuapp.com/
  github repo: https://github.com/lowsound42/web322a2
  All the work in the project is my own except for stock photos, icons, and bootstrap files included
 -->

<body>
  <div class="container bottom-buffer">
    <div class="container holder top-buffer reg flexDash">
    <div>
      <h3 class="well bottom-buffer top-padding">Welcome to the Admin Dashboard, {{data.username}}</h3>
      {{#if data}}
        <p>Your account is  <span class="dashboardSpan">ACTIVE</span></p>
        <p>You have <span class="dashboardSpan">3</span> active web domains</p>
        <p><span class="dashboardSpan">1</span> of your domains will expire in the next <span class="dashboardSpan">15</span> days</p>
      {{/if}}
      <button class="btn btn-primary btn-md px-4 me-md-2" onclick='viewPlans()'>View Plans</button>
      </div>       
      <div>
       <form action="/logout" method="GET">  
      <input class="btn btn-primary btn-md px-4 me-md-2 logout" type="submit" value="Logout">
    </form>
    </div>

  </div>
      <div id="planContainer">

    </div>
  <script src="./bootstrap-5.0.1-dist/js/bootstrap.bundle.js"></script>
  <script>
    function viewPlans() {
      fetch('/planData')
      .then(response => response.json())
      .then(data => {
        let container = document.getElementById('planContainer');
        container.innerHTML = '';
        data.forEach(element=>{
          console.log(element);
          let title = document.createTextNode(element.title);
          let description = document.createTextNode(element.description);
          let price = document.createTextNode(element.price);
        let outerDiv = document.createElement('div');
        let innerDiv = document.createElement('div');
        let header = document.createElement('h5');
        let p1 = document.createElement('p');
        let p2 = document.createElement('p');
        let uList = document.createElement('ul');
        outerDiv.classList.add('col-lg');
        outerDiv.classList.add('card');
        outerDiv.classList.add('card-body-special');
        outerDiv.setAttribute('id', 'card');
        header.classList.add('card-body');
        p1.classList.add('card-text');
        p2.classList.add('card-text');
        header.classList.add('card-title');
        outerDiv.appendChild(innerDiv);
        innerDiv.appendChild(header);
        innerDiv.appendChild(p1);
        innerDiv.appendChild(p2);
        header.appendChild(title);
        p1.appendChild(description);
        p2.appendChild(price);
        container.appendChild(outerDiv);
        })
      });
    }
  </script>
  </body>

</html>
